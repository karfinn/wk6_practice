<h1>KelloggCoin Ledger</h1>

<!-- Step 1: List all transactions, starting with the ICO -->

<p><strong>List of transactions:</strong></p>
<%transactions = Transaction.all%>

<ul>
  <%for transaction in transactions%>
    <li>
      <% to_user = User.find_by("id" => transaction["to_user_id"])%>
      <% from_user = User.find_by("id" => transaction["from_user_id"])%>

      <%if from_user.nil? %>
      <%= "Initial coin offering: #{transaction["amount"]} KC to #{to_user["name"]}" %>
      <%else%>
      <%= "#{transaction["amount"]} KC to #{to_user["name"]} from #{from_user["name"]}"%>
      <%end%>
    </li>
   <%end%>
</ul>


<!-- Step 2: Calculate and display the balances -->

<!-- 
Expected balances:
Balance for Brian: 1348 KC
Balance for Ben: 2516 KC
Balance for Evan: 1164 KC
Balance for Anthony: 1456 KC
Balance for Krystina: 3516 KC 
-->

<p><strong>Account Balances:</strong></p>
<%transactions = Transaction.all%>
<%brian_balance=0%>


  <%for transaction in transactions%>
      <% to_user = User.find_by("id" => transaction["to_user_id"])%>
      <% from_user = User.find_by("id" => transaction["from_user_id"])%>

      <%if to_user["name"] == "Brian" %>
        <%brian_balance = brian_balance + transaction["amount"]%> 
        <%else %> 
        <% to_user["name"] == "Brian" %>
        <%brian_balance = brian_balance - transaction["amount"]%>
        <%end%>
  <%end%>

  <%="Brian's balance is #{brian_balance}"%>